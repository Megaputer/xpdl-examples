/* 
	Правило для поиска темы письма в начале документа. 
	Примеры находимых тем: 
	"О проведении приемочных испытаний"
	"О тестировании решения, приемочных испытаниях и сдаче в эксплуатацию"
*/
rule: поиск_темы 
{
	query: {position(100, phrase("о" or "об", not ".",
					// запрет на точку для фильтрации контекстов типа "и. о. начальника"
					repeat(1, 20, lemma(.) or char(punct)/".")))}:тема
	
	result: Результат = $тема
		attribute: Тема = $тема
	
	/* Кавычки или квадратные скобки вокруг темы попадают в матч */
	rule: тема_кавычки
	{
		query: {phrase(char(dq|"["), $тема, char(dq|"]"))}:м
		
		result: Результат = $м
			attribute: Тема = $тема
	}
}
