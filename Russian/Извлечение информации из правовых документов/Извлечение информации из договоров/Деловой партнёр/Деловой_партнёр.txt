rule: деловой_партнер
{
    query: {phrase(
					// Находим название компании, ссылаясь на ранее найденную сущность Companies
					{entity(Companies)}:компания,
					"в лице",
					
					// Находим имя человека, ссылаясь на ранее найденную сущность People
					{entity(People)}:представитель,	
					"действующего на основании", 
					// Ссылка на доверенность может опционально сопровождаться её номером в виде № + числобуквенное сочетание или число
					{устав}:док or phrase({доверенность}:док, optional("№"), {char(alnum|numeral)}:номер, от, 
					
					// Находим имя человека, ссылаясь на ранее найденную сущность Dates
					{entity(Dates)}:дата),
					"именуемый в дальнейшем",
					{lemma(noun)}:роль // заказчик, исполнитель, подрядчик, перевозчик и т.п.
				
				)}:партнер

    
	 result: Match = $партнер
		   attribute: Компания = toentity(Companies, $компания)   
		   attribute: Представитель = toentity(People, $представитель)
		   attribute: Должность = toentity(People, $представитель, field:=Attribute) // опциональный параметр field:=Attribute позволяет вывести необходимый в атрибут сущности в отдельную колонку
		   attribute: Документ = title(norm($док))
		   attribute: Номер документа = $номер
		   attribute: Дата документа = toentity(Dates, $дата)
		   attribute: Сторона = title(norm($роль))	   
}