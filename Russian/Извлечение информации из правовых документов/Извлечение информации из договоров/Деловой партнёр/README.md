### Описание
Правило ищет наименование делового партнёра.

### Примеры найденных сущностей

**Общество с ограниченной ответственностью «Группа компаний IBS» в лице Дмитрия Павловича Романова, действующего на основании Устава, именуемое в дальнейшем «Перевозчик»**, с одной стороны, и **общество с ограниченной ответственностью «Галэкс» в лице Виктора Фёдоровича Януковича, действующего на основании Устава, именуемое в дальнейшем «Заказчик»**, с другой стороны

### Инструкция
* Создать новый проект в платформе [PolyAnalyst](https://www.megaputer.ru/produkti/)
* Загрузить в проект файл [**Данные_Деловой_партнёр.txt**](Данные_Деловой_партнёр.txt)
* Добавить узел **Извлечение сущностей**, в настройках узла:
	* отключить все стандартные сущности, кроме сущностей **People** (Люди), **Companies** (Компании), **Dates** (Даты).
	* выполнить узел
* Добавить ещё один узел **Извлечение сущностей**, в настройках узла:
	 * отключить стандартные сущности
	 * создать новую пользовательскую сущность
	 * открыть **Редактор правил** новой сущности и скопировать в него правило [**Деловой_партнёр.txt**](Деловой_партнёр.txt):
	 ```
		rule: деловой_партнер
		{
	   		query: {phrase(
				// Находим название компании, ссылаясь на ранее найденную сущность Companies
				{entity(Companies)}:компания,
				"в лице",
				
				// Находим имя человека, ссылаясь на ранее найденную сущность People
				{entity(People)}:представитель,	
				"действующего на основании", 
				// Ссылка на доверенность может опционально сопровождаться её номером в виде № + числобуквенное сочетание или число
				{устав}:док or phrase({доверенность}:док, optional("№"), {char(alnum|numeral)}:номер, от, 
				
				// Находим имя человека, ссылаясь на ранее найденную сущность Dates
				{entity(Dates)}:дата),
				"именуемый в дальнейшем",
				{lemma(noun)}:роль // заказчик, исполнитель, подрядчик, перевозчик и т.п.
			
				)}:партнер
		
				 result: Match = $партнер
				 
					   attribute: Компания = toentity(Companies, $компания)   
					   attribute: Представитель = toentity(People, $представитель)
					   attribute: Должность = toentity(People, $представитель, field:=Attribute) // параметр field:=Attribute позволяет вывести необходимый атрибут сущности в отдельную колонку
					   attribute: Документ = title(norm($док))
					   attribute: Номер документа = $номер
					   attribute: Дата документа = toentity(Dates, $дата)
					   attribute: Сторона = title(norm($роль))	   
			  }
	```
* выполнить узел

### Структура сущности
* **Результат** - общий вывод найденной сущности
* **Компания** - название компании-делового партнёра
* **Представитель** - имя представителя компании
* **Должность** - должность представителя компании
* **Документ** - документ, на основании которого человек представляет компанию
* **Номер документа** - номер документа, на основании которого человек представляет компанию
* **Дата документа** - дата составления документа, на основании которого человек представляет компанию
* **Сторона** - в какой роли выступает участник договора
### Отчет узла
Отчет узла **Извлечение сущностей** выглядит следующим образом:

| Результат | Компания | Представитель | Должность | Документ | Номер документа | Дата документа | Сторона |
| ------ | ------ | ------| ------ | ------ | ------ | ------ |------ |
| ООО "Касторама Рус" в лице главного бухгалтера Владимира Михайловича Платонова действующего на основании доверенности № К-082006 от 12.01.2006 именуемое в дальнейшем Заказчик | ООО «Касторама РУC» | Владимир Михайлович Платонов | Главный бухгалтер | Доверенность | К-082006 | Январь 12, 2006 | Заказчик |

В тексте подсвечиваются следующие фрагменты:

**ООО «Касторама Рус» в лице главного бухгалтера Владимира Михайловича Платонова, действующего на основании доверенности № К-082006 от 12.01.2006, именуемое в дальнейшем «Заказчик»**, с другой стороны, совместно именуемые «Стороны», заключили настоящий договор о нижеследующем