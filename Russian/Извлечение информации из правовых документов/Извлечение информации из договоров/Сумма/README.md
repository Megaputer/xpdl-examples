### Описание
Правило ищет упоминания суммы договора.

### Примеры найденных сущностей
* **Размер арендной платы составляет 600 000 (Шестьсот тысяч ) руб. в год**, в том числе коммунальные (электроснабжение, водоснабжение, теплоснабжение и канализация)
* Общая **сумма Договора составляет 368 Евро, в т.ч. НДС 42 Евро** и включает в себя стоимость товара, стоимость тары и упаковки.

### Инструкция
* Создать новый проект в платформе [PolyAnalyst](https://www.megaputer.ru/produkti/)
* Загрузить в проект файл [**Данные_Сумма.txt**](Данные_Сумма.txt)
* Добавить узел **Извлечение сущностей**, в настройках узла:
	* отключить все стандартные сущности, кроме сущности **Currencies** (Валюты)
	* выполнить узел
* Добавить еще один узел **Извлечение сущностей**, в настройках узла:
	 * отключить стандартные сущности
	 * создать новую пользовательскую сущность
	 * открыть **Редактор правил** новой сущности и скопировать в него правило [**Сумма.txt**](Сумма.txt):
	 ```
	rule: сумма
	{
		query: {orn(плата, платеж, стоимость, сумма, phrase(3, размер, плата, match:=range), phrase(3, цена, договор, match:=range))}:сумма
		
		rule: цена
		{
			query: {phrase(7, {optional(ежемесячный or ежегодный)}:период, $сумма, 
					optional(составлять), {entity(Currencies)}:размер, {optional(orn("в год", "в месяц", "ежемесячно", "ежегодно"))}:период, match:=range)}:цена
			
			result: Результат = $цена
				attribute: Сумма=toentity(Currencies, $размер)
				attribute: Период=$период
			
			rule: ндс
			{
				query: {phrase(10, $цена, not(orn(entity(Currencies), плата, платеж, стоимость, сумма)), 
						phrase(3, {orn("в т.ч.", "в том числе", "включая", "с учетом")}:с_ндс or {orn("без", "без учета")}:без_ндс, 
						ндс or "налог на добавленную стоимость", 
						optional({entity(Currencies)}:ндс)), match:=range)}:цена_ндс
				
				result: Результат = $цена_ндс
					attribute: Сумма=toentity(Currencies, $размер)
					attribute: Период=$период
					attribute: НДС = if($с_ндс !="", "С учетом", "Без учета")
					attribute: Размер НДС = toentity(Currencies, $ндс)
			} 
		}
	}
	```
     ИЛИ
  * импортировать файл [**Сумма.xml**](Сумма.xml), в котором дополнительно настроена постобработка (приведение атрибута  **Период** к значениям *Месяц* или *Год*)
  * выполнить узел

### Структура сущности
* **Результат** - общий вывод найденной сущности
* **Сумма** - сумма договора в денежном выражении
*  **Период** - период оплаты
*  **НДС** - включен ли НДС в сумму договора
*  **Размер НДС** - размер НДС в денежном выражении

### Отчет узла
Отчет узла **Извлечение сущностей** выглядит следующим образом:

| Результат | Сумма | Период |	НДС | Размер НДС | 
| ------ | ------ | ------ | ------ | ------ |
| сумма Договора составляет 368 Евро, в т.ч. НДС 42 Евро | 368 EUR | | С учетом | 42 EUR |

В тексте подсвечиваются следующие фрагменты:
> Общая **сумма Договора составляет 368 Евро, в т.ч. НДС 42 Евро** и включает в себя стоимость товара, стоимость тары и упаковки.
