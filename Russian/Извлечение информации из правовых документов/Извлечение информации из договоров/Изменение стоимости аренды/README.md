
### Описание
Правило ищет упоминания об изменение арендной платы.

### Примеры найденных сущностей
* согласно договору, **размер арендной платы может быть изменен на 5%** 
* **стоимость услуг может быть пересмотрена** Арендодателем **не более чем на 15%**

### Инструкция
* Создать новый проект в платформе [PolyAnalyst](https://www.megaputer.ru/produkti/)
* Загрузить в проект файл [**Данные_Изменение_аренды.txt**](Данные_Изменение_аренды.txt)
* Добавить узел **Извлечение сущностей**, в настройках узла:
	* отключить все стандартные сущности, кроме сущности **Dates** (Даты)
	* выполнить узел
* Добавить еще один узел **Извлечение сущностей**, в настройках узла:
	 * отключить стандартные сущности
	 * создать новую пользовательскую сущность
	 * открыть **Редактор правил** новой сущности и скопировать в него правило [**Изменение_аренды.txt**](Изменение_аренды.txt):
	 ```
	rule: changes
	{
		/*Ищем тексты, в которых упоминается изменение стоимости аренды*/
		//Пример: арендная плата может быть изменена
	    query: {phrase(15, phrase(0, "Размер" or основная, "арендной платы" or оплаты) 
							or "арендная плата" 
							or "стоимость услуг", 
							phrase(0, possible(может), быть, изменен or пересмотрен) 
							or 
							possible(увеличиваться, изменяться))}:m
		
		
		/*Ищем периодичность, процент и дату увеличения арендной платы*/
		//Пример: арендная плата может быть пересмотрена не чаще одного раза в год и не более чем на 10%
		rule: percent
		{
			query: {sentence($m, 
					optional(phrase(0, {phrase(0, не, чаще)}:period, optional(чем), {phrase(0, один, раз, в, год or месяц)}:period)), 
					{optional(entity(Dates))}:dates,
					{phrase(0, optional("не более чем"), на, phrase(0, number(), "%"))
					or
					phrase(0, на, процент, char(comma), не, превышающий, repeat(1, 30, ., allow_punct:=yes))}:percents)}:match
			
			result: Результат = $match
				attribute: Наличие процентов = "Да"
				attribute: Периодичность увеличения размера аренды на фиксированный процент  = norm($period)
				attribute: Размер фиксированного процента увеличения размера аренды = $percents
				attribute: Дата увеличения размера аренды на процент = concat(toentity(Dates, $dates, field:=Month), toentity(Dates, $dates, field:=Year))
		}
	}

	```
	 * выполнить узел

### Структура сущности
* **Результат** - общий вывод найденной сущности
* **Наличие процентов** - наличие возможности изменения арендной платы
* **Периодичность увеличения размера аренды на фиксированный процент** - периодичность увеличение арендной платы
* **Размер фиксированного процента увеличения размера аренды** - процент увеличение арендной платы
* **Дата увеличения размера аренды на процент** - дата, с которой начинается увеличение арендной платы

### Отчет узла
Отчет узла **Извлечение сущностей** выглядит следующим образом:

| Результат| Наличие процентов| Периодичность увеличения размера аренды на фиксированный процент| Размер фиксированного процента увеличения размера аренды| Дата увеличения размера аренды на процент| 
| ------ | ------ |------ |------ |------ |
| Арендная плата может быть пересмотрена не чаще одного раза в год не более чем на 10%| Да |  не чаще одного раза в год| не более чем на 10% ||

В тексте подсвечиваются следующие фрагменты:
>  **Арендная плата может быть пересмотрена** Арендодателем в одностороннем порядке **не чаще одного раза в год** и **не более чем на 10%** (десять процентов).
