### Описание
Правило ищет реквизиты компании: адрес, контактный телефон, ИНН, КПП, ОГРН, а также номера корреспондентского и расчётного счетов, название и БИК банка, в котором они открыты.

### Примеры найденных сущностей
* **ООО «Велесстрой»** (**Москва, Ореховый бульвар, д. 33**, **корп. 6**): 
	  **Ипозембанк**, **БИК 084505426**, **КПП 370201001**, **к\с 607161400**, **р\с 11105550555000001111**
* Исполнитель: **ООО «ЕВРОХИМ»**
 Юридический адрес: **улица Зои и Александра Космодемьянских, д. 4а, Москва, Россия**, **125171
 ОГРН 5067746347576**, **ИНН 7718956250**, **КПП 172137141** 
 **р/с 40702555/00000707777** в **ПАО «Сбербанк»**
 **к/с 30101810200000077555**, **БИК 044525225**
 Тел./факс: **+7 (495) 555-55-55**	  
	  
### Инструкция
* Создать новый проект в платформе [PolyAnalyst](https://www.megaputer.ru/produkti/)
* Загрузить в проект файл [**Данные_реквизиты.txt**](Данные_реквизиты.txt)
* Добавить узел **Извлечение сущностей**, в настройках узла:
	* отключить все стандартные сущности, кроме сущностей: **Companies** (Компании), **Phone Numbers** (Телефоны),  **Post Addresses** (Почтовые адреса), **Account Numbers** (Счета), **Taxpayer Identification Numbers** (Налоговые идентификационные номера)
	* выполнить узел
* Добавить еще один узел **Извлечение сущностей**, в настройках узла:
	 * отключить стандартные сущности
	 * создать новую пользовательскую сущность
	 * открыть **Редактор правил** новой сущности и скопировать в него правило [**Реквизиты.txt**](Реквизиты.txt):
	 ```
		rule: реквизиты
		{
			/*Правило, которое находит реквизиты компании:
			- ООО «Велесстрой» (Москва, Ореховый бульвар, д. 33, корп. 6): 
			  Ипозембанк, ИНН 0274071388, БИК 084505426, КПП 370201001, к\с 607161400, р\с 11105550555000001111.*/
		    query: {fnear({entity(Companies, Industry:!=Банки)}:компания,
						 
						 near({entity(Post Addresses)}:адрес,
							 {optional(entity(Phone Numbers))}:телефон,	
							 {entity(Companies, Industry:=Банки)}:банк,
							 {entity(Taxpayer Identification Numbers, Type:=БИК)}:бик,
							 {entity(Taxpayer Identification Numbers, Type:=КПП)}:кпп,
							 {optional(entity(Taxpayer Identification Numbers, Type:=ИНН))}:инн,
							 {optional(entity(Taxpayer Identification Numbers, Type:=ОГРН))}:огрн,
							 {entity(Account Numbers, Type:="Расчётный счёт")}:расчётный_счёт,
							 {entity(Account Numbers, Type:="Корреспондентский счёт")}:корреспондентский_счёт,
							 max_gap:=7),				 
						
						max_gap:=5)}:m

		    result: Результат = $m
				attribute: Компания = toentity(Companies, $компания)
				attribute: Адрес = toentity(Post Addresses, $адрес)
				attribute: Контактный телефон = toentity(Phone Numbers, $телефон)
				attribute: ИНН = toentity(Taxpayer Identification Numbers, $инн)
				attribute: КПП = toentity(Taxpayer Identification Numbers, $кпп)
				attribute: ОГРН = toentity(Taxpayer Identification Numbers, $огрн)
				attribute: Банк = toentity(Companies, $банк)
				attribute: БИК = toentity(Taxpayer Identification Numbers, $бик)
				attribute: Корреспондентский счёт = toentity(Account Numbers, $корреспондентский_счёт)
				attribute: Расчётный счёт = toentity(Account Numbers, $расчётный_счёт)
		} 
	```
	 * выполнить узел

### Структура сущности
* **Результат** - общий вывод найденной сущности
* **Компания** - название компании
*  **Адрес** - адрес компании
* **Контактный телефон** - контактный телефон компании
* **ИНН** - номер ИНН
* **КПП** - номер КПП
* **ОГРН** - номер ОГРН
* **Банк** - банк, в котором у компании открыт счёт
* **БИК** - БИК банка 
* **Расчётный счёт** - номер расчётного счёта
* **Корреспондентский счёт** - номер корреспондентского счёта


### Отчет узла
Отчет узла **Извлечение сущностей** выглядит следующим образом:

| Результат| Компания | Адрес | Контактный телефон | ИНН |  КПП | ОГРН | Банк | БИК | Корреспондентский счёт| Расчётный счёт|
| ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| ООО "Велесстрой" Москва, Ореховый бульвар, д. 33 корп. 6 Ипозембанк ИНН 0274071388 БИК 084505426 КПП 370201001 к\с 607161400 р\с 11105550555000001111 | ООО «Велесстрой» | Ореховый бульвар, д. 33 корпус 6, Москва, Россия | | 0274071388 | 370201001| |ООО «ИПОЗЕМбанк» | 084505426  | 607161400 | 11105550555000001111|
| ООО "ЕВРОХИМ" улица Зои и Александра Космодемьянских, д. 4а, Москва, Россия 125171 ОГРН 5067746347576 ИНН 7718956250 КПП 172137141 р/с 40702555 00000707777 ПАО "Сбербанк" к/с 30101810200000077555 БИК 044525225 +7 (495) 555-55-55| EuroChem Group AG | улица Зои и Александра Космодемьянских, д. 4а, Москва, Россия 125171 | +7 (495) 555-5555 | 7718956250 | 172137141 | 5067746347576 | ПАО «Сбербанк» | 044525225 | 30101810200000077555 | 4070255500000707777 |

В тексте подсвечиваются следующие фрагменты:
> Исполнитель: **ООО «ЕВРОХИМ»**
>
> Юридический адрес: **улица Зои и Александра Космодемьянских, д. 4а, Москва, Россия**, **125171**
>
> **ОГРН 5067746347576**, **ИНН 7718956250**, **КПП 172137141**
> **р/с 40702555/00000707777 ** в **ПАО «Сбербанк»**
> **к/с 30101810200000077555**, **БИК 044525225**
> 
> Тел./факс: **+7 (495) 555-55-55**
> 
> Заказчик: **ООО ‘‘Касторама Рус’’**
> 
> Юридический адрес: **улица Ибрагимова, д. 20 стр. 1, Москва, Россия**, **105318**
> 
> **ИНН 7713721199**, **КПП 138618791**
> **р/счёт 40702855500000000777** в **ПАО «Сбербанк»**
> **к/счёт 30101810500000000283**, **БИК 044525225**