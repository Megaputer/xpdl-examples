### Описание
Правило ищет сумму налогового сбора.

### Примеры найденных сущностей
* Значительный рост наблюдается по **поступлению налога на имущество организаций** - за 3 месяца 2020 года они **составили 347 645 тыс. рублей**.
* **Транспортного налога** при годовом плане в сумме 1 235 673,3 тыс. рублей фактически за 1 квартал 2020 года **поступило 342 570 тыс. рублей**

### Инструкция
* Создать новый проект в платформе [PolyAnalyst](https://www.megaputer.ru/produkti/)
* Загрузить в проект файл [**Данные-Сумма налогового сбора.txt**](<Данные-Сумма налогового сбора.txt>)
* Добавить узел **Извлечение сущностей**, в настройках узла:
	 * отключить все стандартные сущности, кроме сущности **Currencies** (Валюты)
	 * создать новую пользовательскую сущность
	 * открыть **Редактор правил** новой сущности и скопировать в него правило [**Налог.txt**](../Налог/Налог.txt)
	 * выполнить узел
* Добавить еще один узел **Извлечение сущностей**, в настройках узла:
	 * отключить стандартные сущности
	 * создать новую пользовательскую сущность
	 * открыть **Редактор правил** новой сущности и скопировать в него правило [**Сумма налогового сбора.txt**](<Сумма налогового сбора.txt>):
	 ```  
	 rule: сумма_налог 
	{
	query: {entity(Налог)}:налог
			or
		   {entity(Currencies)}:сумма
		   
	   
	rule: налог_поступил_в_сумме
	{
		query: {sfollow($налог, "поступил", phrase("в сумме"|"в размере",$сумма))}:сбор
		
		result: Результат = $сбор
			attribute: Название налога = toentity(Налог, $налог, field:=Налог)
			attribute: Сумма сборов = toentity(Currencies,$сумма, field:=Value)
	}
	
		
	rule: налог_поступил
	{
		query: {sfollow($налог, phrase("поступило", $сумма))}:сбор
		
		result: Результат = $сбор
			attribute: Название налога = toentity(Налог, $налог, field:=Налог)
			attribute: Сумма сборов = toentity(Currencies,$сумма, field:=Value)
	}
	

		rule: поступления_налога
	{
		query: {sfollow(поступления , $налог, phrase("составили", $сумма))}:сбор
		
		result: Результат = $сбор
			attribute: Название налога = toentity(Налог, $налог, field:=Налог)
			attribute: Сумма сборов = toentity(Currencies,$сумма, field:=Value)
	}
}

	```
* выполнить узел

### Структура сущности
* **Результат** - общий вывод найденной сущности
* **Название налога** - название налога (наследуется из предыдущего этапа через сущность Налог)
* **Сумма сборов** - сумма сборов с указанием валюты (наследуется из предыдущего этапа через сущность Currencies)

### Отчет узла
Отчет узла **Извлечение сущностей** выглядит следующим образом:

| Результат | Название налога| Сумма сборов|
| ------ | ------ | ------ |
|Налог на прибыль организаций поступил в сумме 21121664 тыс. рублей | Налог на прибыль организаций | 21,121,664,000 RUB |

В тексте подсвечиваются следующие фрагменты:
> **Налог на прибыль организаций** при плане на 2020 год в размере 35 458 236, 5 тыс. рублей фактически **поступил в сумме 21 121 664 тыс. рублей**, годовой план исполнен на 24,3%.